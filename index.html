<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aesthete</title>
  <link rel="stylesheet" href="./resources/index.css">
  <link rel="icon" type="image/x-icon" href="./resources/favicon.png">
</head>

<body>
  <div id="menu-bar">
    <div id="menu-right">
      <button id="button-left" type="button">Typeface</button>
      <button id="button-right" type="button">On Aesthetics</button>
    </div>
  </div>

  <div id="mainContent">
    <section class="section section-1">        
      <h1 class="main-text reactive-text">Aesthete</h1>
      <div id="main-info"><p id="main-info-text">A Digital Variable Typeface that Responds to Sound</p>
    </div>
   </section>

    <section class="section section-2">
      <h1 class="display-text" id="displayText">SENSE<br>MEMORY</h1>
      <div class="slider-container">
        <div class="slider-wrapper">
          <input type="range" min="100" max="900" value="100" class="slider" id="weightSlider">
        </div>
        <div class="labels">
          <div class="label-left">
            <div class="label-title">FOCUSED</div>
          </div>
          <div class="label-right">
            <div class="label-title">NOISY</div>
          </div>
        </div>
      </div>
    </section>

    <section class="section section-3">
      <div>
        <p id="about-text">
          Tracing the etymology of <span class="italic">aesthetics</span>, rooted in the Greek <span class="italic">aisthitikos</span>, it originally referred to sensuous perception; cognition through our senses; our bodies' way of perceiving and responding to signals in the world. <span class="italic">Aesthete</span> illustrates this, sensing and reflecting the environment it is used in. Its variability, ranging from focused to illegible noise, mimics our own sensory systems in our technologically-mediated environments. Volume input, in this instance, stands in for sensory noise as a whole; the more stimulus we encounter the more we must dull our senses to compensate, shutting out experience. <span class="italic">Aesthete</span> intentionally engages the body within digital space and technology differently â€“ not as a means for gathering data or capturing attention, but as a mirror for our being in the world, encouraging bodily awareness and play.
        </p>
      </div>
    </section>

    <section class="section section-4">
      <div class="typing-container">
        <textarea id="typingArea" class="typing-area reactive-text" placeholder="Type here" spellcheck="false"></textarea>
      </div>
    </section>
  </div>

  <div id="aestheticsContent" style="display: none;">
    <div id="menu-bar2">
      <p id="menu-left2">Excerpts from Aesthetics and Anaesthetics Part I&II by Susan Buck-Morss</p>
      <div id="menu-right2">
        <button id="button-left2" type="button">Typeface</button>
        <button id="button-right2" type="button">On Aesthetics</button>
      </div>
    </div>

    <div class="section section5">
      <img src="./resources/bodies.png" loading="lazy">
    </div>

    <div class="section alt">
      <p id="aesthetics-title">ON AESTHETICS</p>
    </div>

    <div class="section section6">
      <img src="./resources/collages.jpg" loading="lazy">
    </div>

    <div class="section alt">
      <span class="aesthete discourse reactive-text">DISCOURSE<br>OF THE BODY</span>  
    </div>

    <div class="section alt">
      <img class="text text1" src="./resources/text.jpg" loading="lazy">
    </div>

    <div class="section section7">
      <img src="./resources/collages2.jpg" loading="lazy">
    </div>

    <div class="section alt">
      <span class="aesthete perceptive reactive-text">PERCEPTIVE<br>BY FEELING</span>  
    </div>

    <div class="section alt">
      <img class="text text2" src="./resources/text2.jpg" loading="lazy">
    </div>

    <div class="section section8">
      <img src="./resources/collages3.jpg" loading="lazy">
    </div>

    <div class="section alt">
      <img class="text text3" src="./resources/text3.jpg" loading="lazy">
    </div>

    <div class="section section9">
      <img src="./resources/collages4.jpg" loading="lazy">
    </div>

    <div class="section alt">
      <span class="aesthete world reactive-text">in the<br>world</span>  
    </div>

    <div class="section alt">
      <img class="text text4" src="./resources/text4.jpg" loading="lazy">
    </div>

    <div class="section section10">
      <img src="./resources/collages5.jpg" loading="lazy">
    </div>

    <div class="section alt">
      <span class="aesthete stimuli reactive-text">psychic<br>shock</span>
    </div>

    <div class="section alt">
      <img class="text text5" src="./resources/text5.jpg" loading="lazy">
    </div>

    <div class="section section11">
      <img src="./resources/collages6.jpg" loading="lazy">
    </div>

    <div class="section alt">
      <img class="text text6" src="./resources/text6.jpg" loading="lazy">
    </div>

    <div class="section section12">
      <img src="./resources/collages7.jpg" loading="lazy">
    </div>

    <div class="section alt">
      <span class="aesthete factory reactive-text">injuring<br>the senses</span>
    </div>

    <div class="section alt">
      <img class="text text7" src="./resources/text7.jpg" loading="lazy">
    </div>

    <div class="section section13">
      <img src="./resources/collages8.jpg" loading="lazy">
    </div>

    <div class="section alt">
      <img class="text text8" src="./resources/text8.jpg" loading="lazy">
    </div>

    <div class="section section14">
      <img src="./resources/collages9.jpg" loading="lazy">
    </div>

    <div class="section alt">
      <img class="text text9" src="./resources/text9.jpg" loading="lazy">
    </div>

    <div class="section section15">
      <img src="./resources/collages10.jpg" loading="lazy">
    </div>

    <div class="section alt">
      <span class="aesthete control reactive-text">control<br>through<br>excess</span>
    </div>

    <div class="section alt">
      <img class="text text10" src="./resources/text10.jpg" loading="lazy">
    </div>

    <div class="section section16">
      <img src="./resources/collages11.jpg" loading="lazy">
    </div>

    <div class="section alt">
      <span class="aesthete perception reactive-text">crisis in<br>perception</span>
    </div>

    <div class="section alt">
      <img class="text text11" src="./resources/text11.jpg" loading="lazy">
    </div>

    <div class="section section17">
      <img src="./resources/collages12.jpg" loading="lazy">
    </div>

    <div class="section alt">
      <img class="text text12" src="./resources/text12.jpg" loading="lazy">
    </div>

    <div class="section section18">
      <img src="./resources/collages13.jpg" loading="lazy">
    </div>

    <div class="section alt">
      <span class="aesthete body reactive-text">a body<br>divorced</span>
    </div>

    <div class="section alt">
      <img class="text text13" src="./resources/text13.jpg" loading="lazy">
    </div>

    <div class="section section19">
      <img src="./resources/collages14.jpg" loading="lazy">
    </div>

    <div class="section alt">
      <span class="aesthete reception reactive-text">loss of<br>reception</span>
    </div>

    <div class="section alt">
      <img class="text text14" src="./resources/text14.jpg" loading="lazy">
    </div>

    <div class="section section20">
      <img src="./resources/collages15.jpg" loading="lazy">
    </div>

    <div class="section alt">
      <img class="text text15" src="./resources/text15.jpg" loading="lazy">
    </div>
  </div>

 <!-- AUDIO -->
<div style="position: fixed; bottom: 10px; right: 10px; display: flex; gap: 1px; font-family: 'Digital Sans Bold', monospace; font-size: 11px; z-index: 1000;">
  <button id="noisyBtn" style="background: transparent; border: none; color: white; padding: 6px 12px; cursor: pointer; font-family: inherit; font-size: inherit; font-weight: normal; text-decoration: none;">NOISY</button>
  <button id="pauseBtn" style="background: transparent; border: none; color: white; padding: 6px 12px; cursor: pointer; font-family: inherit; font-size: inherit; font-weight: normal; text-decoration: underline;">QUIET</button>
</div>

<audio id="backgroundAudio" loop>
  <source src="./resources/sounds.mp3" type="audio/mpeg">
</audio>

<!-- NAVIGATION -->
<script>
  const mainContent = document.getElementById('mainContent');
  const aestheticsContent = document.getElementById('aestheticsContent');
  const buttonLeft = document.getElementById('button-left');
  const buttonRight = document.getElementById('button-right');
  const buttonLeft2 = document.getElementById('button-left2');
  const buttonRight2 = document.getElementById('button-right2');

  let mainScrollPosition = 0;
  let aestheticsScrollPosition = 0;

  function showTypefacePage() {
    aestheticsScrollPosition = window.scrollY;
    mainContent.style.display = 'block';
    aestheticsContent.style.display = 'none';
    document.getElementById('menu-bar').style.display = 'block';
    
    document.getElementById('noisyBtn').style.color = 'white';
    document.getElementById('pauseBtn').style.color = 'white';
    
    setTimeout(() => {
      window.scrollTo(0, mainScrollPosition);
    }, 0);
  }

  function showAestheticsPage() {
    mainScrollPosition = window.scrollY;
    mainContent.style.display = 'none';
    aestheticsContent.style.display = 'block';
    document.getElementById('menu-bar').style.display = 'none';
    
    document.getElementById('noisyBtn').style.color = 'black';
    document.getElementById('pauseBtn').style.color = 'black';
    
    setTimeout(() => {
      window.scrollTo(0, aestheticsScrollPosition);
    }, 0);
  }

  buttonLeft.addEventListener('click', showTypefacePage);
  buttonRight.addEventListener('click', showAestheticsPage);
  buttonLeft2.addEventListener('click', showTypefacePage);
  buttonRight2.addEventListener('click', showAestheticsPage);
</script>

<!-- SLIDER -->
<script>
  const weightSlider = document.getElementById('weightSlider');
  const displayText = document.getElementById('displayText');
  const section2 = document.querySelector('.section-2');
  const labels = document.querySelector('.labels');

  if (weightSlider && displayText && section2 && labels) {
    weightSlider.addEventListener('input', function() {
      const weight = this.value;
      displayText.style.fontVariationSettings = `'wght' ${weight}`;
      
      const progress = (weight - 100) / 800;
      
      const bgR = Math.round(124 + (255 - 124) * progress);
      const bgG = Math.round(187 + (255 - 187) * progress);
      const bgB = Math.round(240 + (255 - 240) * progress);
      section2.style.backgroundColor = `rgb(${bgR}, ${bgG}, ${bgB})`;
      
      const textR = Math.round(200 + (0 - 200) * progress);
      const textG = Math.round(255 + (0 - 255) * progress);
      const textB = Math.round(109 + (0 - 109) * progress);
      const textColor = `rgb(${textR}, ${textG}, ${textB})`;
      
      displayText.style.color = textColor;
      labels.style.color = textColor;
    });
  }
</script>

<!-- REACTIVE -->
<script>
  let audioContext;
  let analyser;
  let dataArray;
  let currentWeight = 100;

  const reactiveElements = document.querySelectorAll('.reactive-text');
  const audioElement = document.getElementById('backgroundAudio');
  const noisyBtn = document.getElementById('noisyBtn');
  const pauseBtn = document.getElementById('pauseBtn');

  window.addEventListener('load', initMicrophone);

  async function initMicrophone() {
    try {
      const stream = await navigator.mediaDevices.getUserMedia({ 
        audio: {
          echoCancellation: false,
          noiseSuppression: false,
          autoGainControl: false
        }
      });
      
      audioContext = new (window.AudioContext || window.webkitAudioContext)();
      analyser = audioContext.createAnalyser();
      analyser.fftSize = 2048;
      analyser.smoothingTimeConstant = 0.18;
      const bufferLength = analyser.frequencyBinCount;
      dataArray = new Uint8Array(bufferLength);
      
      const micSource = audioContext.createMediaStreamSource(stream);
      micSource.connect(analyser);
      
      console.log('Microphone listening');
      analyzeAudio();
      
    } catch (error) {
      console.error('Microphone access denied:', error);
    }
  }

  noisyBtn.addEventListener('click', () => {
    audioElement.play()
      .then(() => {
        console.log('Audio playing');
        noisyBtn.style.textDecoration = 'underline';
        pauseBtn.style.textDecoration = 'none';
      })
      .catch(e => {
        console.error('Play failed:', e);
      });
  });

  pauseBtn.addEventListener('click', () => {
    audioElement.pause();
    pauseBtn.style.textDecoration = 'underline';
    noisyBtn.style.textDecoration = 'none';
  });

  function analyzeAudio() {
    if (dataArray) {
      analyser.getByteFrequencyData(dataArray);
      
      const overall = dataArray.reduce((a, b) => a + b) / dataArray.length;
      const normalized = overall / 255;
      
      let weight;
      
      if (normalized < 0.07) {
        const stageNormalized = normalized / 0.07; 
        weight = Math.round(100 + (stageNormalized * 700));
      } else if (normalized < 0.10) {
        const stageNormalized = (normalized - 0.08) / 0.10;
        weight = Math.round(250 + (stageNormalized * 900));
      } else {
        const stageNormalized = (normalized - 0.20) / 0.80;
        const curved = Math.pow(stageNormalized, 0.4);
        weight = Math.round(600 + (curved * 1300));
      }
      
      currentWeight = weight;
      
      reactiveElements.forEach(element => {
        element.style.fontVariationSettings = `'wght' ${currentWeight}`;
      });
    }
    
    requestAnimationFrame(analyzeAudio);
  }
</script>
  
</body>
</html>